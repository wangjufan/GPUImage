function PageQuery(n){if(this.q=n.length>1?n.substring(1,n.length):null,this.keyValuePairs=[],n)for(var t=0;t<this.q.split("&").length;t++)this.keyValuePairs[t]=this.q.split("&")[t];this.getKeyValuePairs=function(){return this.keyValuePairs};this.getValue=function(n){for(var t=0;t<this.keyValuePairs.length;t++)if(this.keyValuePairs[t].split("=")[0]==n)return this.keyValuePairs[t].split("=")[1];return!1};this.getParameters=function(){for(var t=new Array(this.getLength()),n=0;n<this.keyValuePairs.length;n++)t[n]=this.keyValuePairs[n].split("=")[0];return t};this.getLength=function(){return this.keyValuePairs.length}}function replaceTag(n){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[n]||n}function safe_tags_replace(n){return n.replace(/[&<>]/g,replaceTag)}var TEXTAREA_PLACEHOLDER_MESSAGE="Message support...",TEXTAREA_PLACEHOLDER_CODE="Paste Code Snippet...",ProgrammingLanguage={CSHARP:0,BASIC:1,JAVASCRIPT:2,OBJECTIVEC:3,JAVA:4,CPP:5,MARKUP:6,SWIFT:7},ChatUtils=function(){this.siteRoot=chatOptions.siteRoot?chatOptions.siteRoot:"http://localhost:13724";chatOptions.uploadRoot?(this.uploadUrl=chatOptions.uploadRoot+"/home/upload?roomname=",this.downloadUrl=chatOptions.uploadRoot+"/Temp/"):(this.uploadUrl="http://localhost:15385/home/upload?roomname=",this.downloadUrl="http://localhost:15385/Temp/");this.popoutUrl=chatOptions.popoutUrl?chatOptions.popoutUrl:"http://localhost:2084/standalone-chat.html";this.audioUrl=window.location.protocol=="http"?"http://localhost:2084/content/chat/resources/notification.mp3":"https://"+window.location.hostname+"/content/chat/resources/notification.mp3"};ChatUtils.prototype.getCookie=function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""};ChatUtils.prototype.convertToKB=function(n){return Math.round(n/1024)};ChatUtils.prototype.setCookie=function(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u};ChatUtils.prototype.deleteCookie=function(n){document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"};ChatUtils.prototype.autoScroll=function(n){var t=document.getElementById(n);t.scrollTop=t.scrollHeight};ChatUtils.prototype.isStandAlone=function(){return window.location.href.toLowerCase()==this.popoutUrl.toLowerCase()?!0:!1};ChatUtils.prototype.isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1};ChatUtils.prototype.getLanguageClass=function(n){for(var t in ProgrammingLanguage)if(ProgrammingLanguage[t]===n)return t.toLowerCase();return"unknown"};ChatUtils.prototype.fillCodeComboBox=function(){var t=$("#language-combobox-input");for(var n in ProgrammingLanguage)$(t).append('<option value="'+n+'">'+n+"<\/option>")};ChatUtils.prototype.setAllowedFiles=function(n){for(var i="",t=0;t<n.length;t++)i+=t!=n.length-1?"."+n[t]+",":"."+n[t];$("#file-upload-input").attr("accept",i)};ChatUtils.prototype.sameUser=function(n){var t=[],i;return($("#discussion-list li").each(function(){t.push($(this))}),typeof resizeStandaloneChat=="function"&&resizeStandaloneChat(),t.length>0&&$(t[t.length-1])[0].classList.length>0&&(i=$(t[t.length-1])[0].classList,jQuery.inArray(n,i)!==-1))?$(t[t.length-1]):null};ChatUtils.prototype.updateTextareaPlaceHolder=function(){$("#language-combobox-input").is(":visible")?($("#message-textarea").attr("placeholder",TEXTAREA_PLACEHOLDER_CODE),$("#message-textarea").addClass("typing-code")):($("#message-textarea").attr("placeholder",TEXTAREA_PLACEHOLDER_MESSAGE),$("#message-textarea").removeClass("typing-code"))};ChatUtils.prototype.enterHandler=function(n){var i=$("#message-textarea").prop("selectionStart"),t;if(n.which!=13||n.shiftKey)n.which==13&&n.shiftKey&&(n.preventDefault(),t=$("#message-textarea").val(),t=t.substring(0,i)+"\n",$("#message-textarea").val(t));else return n.preventDefault(),!0;return!1};ChatUtils.prototype.encodeDownload=function(n,t){n=safe_tags_replace(n).replace(/ /g,"%20");n=n.replace(/(https?:\/\/[^\s]+)/gi,'<a href="$1" target="_blank">'+t+"<\/a>");n=n.replace(/(?:\r\n|\r|\n)/g,"<br />");var r=$("<div />").text(n).html(),i=document.createElement("DIV");return i.innerHTML=r,i.textContent||i.innerText||""};ChatUtils.prototype.htmlEncode=function(n){n=safe_tags_replace(n);n=n.replace(/(https?:\/\/[^\s]+)/gi,function(n){return!(window.location.href.toLowerCase().indexOf("standalone")>-1)&&(n.toLowerCase().indexOf("leadtools.com")>-1||n.toLowerCase().indexOf("webdev-test.leadtools.com"))>-1?'<a href="'+n+'">'+n+"<\/a>":'<a href="'+n+'" target="_blank">'+n+"<\/a>"});n=n.replace(/(?:\r\n|\r|\n)/g,"<br />");var i=$("<div />").text(n).html(),t=document.createElement("DIV");return t.innerHTML=i,t.textContent||t.innerText||""};ChatUtils.prototype.validateForm=function(n,t,i,r){var u=!0;return(n==null||n.trim()=="")&&(u=!1,$("#require-first-name").show()),(t==null||t.trim()=="")&&(u=!1,$("#require-last-name").show()),i!=null&&i.trim()!=""&&/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)||($("#require-email").show(),u=!1),(r==null||r.trim()=="")&&($("#require-question").show(),u=!1),u};ChatUtils.prototype.validateSurvey=function(n){$(".required-elements").hide();var t=!0;return(n.OverallExperience==null||n.OverallExperience.trim()=="")&&(t=!1,$("#require-overall").show()),(n.TechnicalKnowledge==null||n.TechnicalKnowledge.trim()=="")&&(t=!1,$("#require-knowledge").show()),(n.CommunicationSkills==null||n.CommunicationSkills.trim()=="")&&($("#require-communication").show(),t=!1),t};ChatUtils.prototype.createGuid=function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()};ChatUtils.prototype.showGroup=function(n){$("#"+n).hasClass("hidden-group")&&$("#"+n).removeClass("hidden-group")};ChatUtils.prototype.hideGroup=function(n){$("#"+n).hasClass("hidden-group")||$("#"+n).addClass("hidden-group")};ChatUtils.prototype.hidePersistent=function(n,t){$("#"+n).hasClass(t)||$("#"+n).addClass(t)};ChatUtils.prototype.showPersistent=function(n,t){$("#"+n).hasClass(t)&&$("#"+n).removeClass(t)};ChatUtils.prototype.queryString=function(n){var t=new PageQuery(window.location.search.toLowerCase());return unescape(t.getValue(n))};ChatUtils.prototype.parseTrigger=function(n){for(var i,t=0;t<n.triggers.length;t++)if((i=(window.location.protocol+"//"+window.location.hostname).slice(-1)!="/"?window.location.port==80||window.location.port==""?window.location.protocol+"//"+window.location.hostname+n.triggers[t].url:window.location.protocol+"//"+window.location.hostname+":"+window.location.port+n.triggers[t].url:(window.location.protocol+"//"+window.location.hostname).substr(0,chatOptions.clientRoot.length-1)+n.triggers[t].url,i.toLowerCase()==window.location.href.toLowerCase())||!n.triggers[t].exact&&window.location.href.toLowerCase().indexOf(i.toLocaleLowerCase())>=0)return n.triggers[t];return""};